# ------------------------------------------------
# 迷你数据库管理系统 (Mini DBMS)
# 一个全面的教育型数据库管理系统
# ------------------------------------------------

源代码文件列表：（每行第一个文件是主模块，其他是辅助模块）

(1) 主控制模块：main_db.py
    -> 控制整个程序的执行，包含9个功能分支
    -> 提供数据库操作的交互式用户界面
    -> 处理菜单导航和用户输入处理

(2) 公共模块：common_db.py
    -> 包含所有模块引用的常量、类和函数
    -> 定义词法分析器、解析器和语法树的全局变量
    -> 提供树数据结构的Node类

(3) 模式管理模块：schema_db.py
    -> 管理表模式存储和元数据操作
    -> 处理表结构定义和字段信息
    -> 支持模式文件的读取、写入和验证

(4) 数据管理模块：storage_db.py
    -> 以二进制格式管理表数据存储
    -> 实现记录的插入、删除和更新操作
    -> 提供基于4KB块的文件管理

(5) 索引管理模块：index_db.py, index_manager.py
    -> 实现B树和Hash索引结构
    -> 提供索引创建、删除和搜索操作
    -> 支持性能测试和索引比较

(6) 查询分析模块：query_plan_db.py, parser_db.py, lex_db.py
    -> 实现SQL语句解析和执行
    -> 词法分析：对SQL关键字和符号进行分词
    -> 语法分析：从SQL语句构建语法树
    -> 查询规划：执行解析后的SQL语句

(7) 事务日志模块：log_db.py
    -> 管理数据恢复的事务日志
    -> 维护前像/后像日志
    -> 跟踪活跃和已提交的事务

# ------------------------------------------------
# 系统特性：
# ------------------------------------------------

支持的数据类型：
- STRING (0)：固定长度字符串
- VARSTRING (1)：可变长度字符串  
- INTEGER (2)：整数
- BOOLEAN (3)：布尔值（真/假）

支持的SQL语句：
- CREATE TABLE：创建带有字段定义的新表
- INSERT INTO：向现有表插入记录
- SELECT FROM WHERE：使用可选条件查询数据
- UPDATE SET WHERE：使用条件更新记录
- DELETE FROM WHERE：使用条件删除记录
- DROP TABLE：删除表结构和数据

支持的索引类型：
- B树索引：支持范围查询的有序索引
- Hash索引：用于精确匹配查询的基于哈希的索引

事务特性：
- 前像/后像日志记录
- 活跃事务跟踪
- 提交事务日志记录

文件组织：
- 模式文件：all.sch（表结构定义）
- 数据文件：{表名}.dat（二进制表数据）
- 索引文件：{表名}.ind（B树）、{表名}.hash（Hash）
- 日志文件：logs/目录（事务日志）

性能特性：
- 索引性能测试和比较
- 顺序扫描vs索引搜索基准测试
- 查询执行时间测量
- 支持大数据集（20,000+记录）的性能分析

# ------------------------------------------------
# 使用说明：
# ------------------------------------------------

1. 运行main_db.py启动系统
2. 使用菜单选项1-9执行数据库操作：
   - 选项1：创建表或插入数据
   - 选项2：删除表
   - 选项3：查看表结构和数据
   - 选项4：删除所有表
   - 选项5：按字段值删除记录
   - 选项6：按字段值更新记录
   - 选项7：执行SQL语句
   - 选项8：查看事务日志
   - 选项9：索引管理操作

3. SQL操作（选项7）：
   - 输入标准SQL语句
   - 示例：CREATE TABLE students(id INTEGER, name CHAR(20))
   - 示例：INSERT INTO students VALUES (1, 'John')
   - 示例：SELECT * FROM students WHERE id = 1
   - 特殊命令：输入'+'生成测试数据

4. 索引操作（选项9）：
   - 在表字段上创建B树或Hash索引
   - 测试索引性能与顺序扫描的对比
   - 比较不同索引类型的性能
   - 查看所有现有索引
   - 支持自动化性能基准测试